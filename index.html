<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YT Cloud Downloader | Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; }
        .glass { background: rgba(15, 23, 42, 0.8); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.1); }
    </style>
</head>
<body class="bg-[#020617] text-white min-h-screen">

    <div class="max-w-4xl mx-auto p-6 md:p-12">
        <header class="flex flex-col md:flex-row justify-between items-center mb-12 gap-6">
            <div class="flex items-center gap-4">
                <div class="bg-red-600 p-3 rounded-2xl shadow-lg shadow-red-600/20">
                    <i data-lucide="play" class="fill-current"></i>
                </div>
                <div>
                    <h1 class="text-2xl font-black tracking-tight">YT-Downloader <span class="text-red-500">Cloud</span></h1>
                    <p id="repoInfo" class="text-slate-500 text-xs font-mono uppercase tracking-widest leading-tight">Lade Repository Info...</p>
                </div>
            </div>
            <button onclick="openActionTab()" class="bg-white text-black px-6 py-3 rounded-2xl font-bold text-sm flex items-center gap-2 hover:bg-slate-200 transition">
                <i data-lucide="plus-circle" class="w-4 h-4"></i> Neuer Download
            </button>
        </header>

        <div class="glass rounded-[2.5rem] p-8 md:p-12 mb-10 text-center border-red-500/20 border">
            <h2 class="text-3xl font-extrabold mb-4">Bereit für den nächsten Download?</h2>
            <p class="text-slate-400 mb-8 max-w-md mx-auto">Klicke auf den Button oben, füge den Link bei GitHub ein und das Video wird auf den GitHub-Servern für dich verarbeitet.</p>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-left">
                <div class="bg-slate-800/40 p-5 rounded-2xl border border-slate-700/50">
                    <i data-lucide="zap" class="text-yellow-400 mb-3"></i>
                    <p class="font-bold text-sm">High-Speed</p>
                    <p class="text-xs text-slate-500">Downloads mit bis zu 1GBit/s.</p>
                </div>
                <div class="bg-slate-800/40 p-5 rounded-2xl border border-slate-700/50">
                    <i data-lucide="shield-check" class="text-green-400 mb-3"></i>
                    <p class="font-bold text-sm">Anonym</p>
                    <p class="text-xs text-slate-500">Deine IP bleibt verborgen.</p>
                </div>
                <div class="bg-slate-800/40 p-5 rounded-2xl border border-slate-700/50">
                    <i data-lucide="file-video" class="text-blue-400 mb-3"></i>
                    <p class="font-bold text-sm">Formate</p>
                    <p class="text-xs text-slate-500">Wähle zwischen MP3 oder MP4.</p>
                </div>
            </div>
        </div>

        <section>
            <h3 class="text-xl font-bold mb-6 flex items-center gap-2">
                <i data-lucide="history" class="text-slate-500"></i> Deine letzten Downloads
            </h3>
            <div id="releaseList" class="space-y-3">
                <p class="text-slate-600 italic">Suche nach fertigen Dateien...</p>
            </div>
        </section>
    </div>

    <script>
        lucide.createIcons();

        // ERKENNT AUTOMATISCH DEINEN USER UND REPO NAMEN AUS DER URL
        const pathParts = window.location.pathname.split('/');
        // Falls auf GitHub Pages (username.github.io/repo-name/)
        const user = window.location.hostname.split('.')[0];
        const repo = pathParts[1] || "YouTube-downloader"; 

        // Falls du lokal testest, kannst du diese hier manuell setzen:
        const finalUser = "Aman-create-code";
        const finalRepo = "YouTube-downloader";

        document.getElementById('repoInfo').innerText = `${finalUser} / ${finalRepo}`;

        function openActionTab() {
            window.open(`https://github.com/${finalUser}/${finalRepo}/actions/workflows/download.yml`, '_blank');
        }

        // Holt die fertigen Downloads (Releases) von GitHub
        async function fetchReleases() {
            const container = document.getElementById('releaseList');
            try {
                const response = await fetch(`https://api.github.com/repos/${finalUser}/${finalRepo}/releases`);
                const data = await response.json();

                if (data.length === 0) {
                    container.innerHTML = '<p class="text-slate-500 text-sm p-8 bg-slate-900/50 rounded-3xl border border-dashed border-slate-800">Noch keine Downloads fertig. Starte deinen ersten Workflow!</p>';
                    return;
                }

                container.innerHTML = data.map(release => `
                    <div class="bg-slate-900/50 border border-slate-800 p-5 rounded-[1.5rem] flex justify-between items-center group hover:border-red-500/50 transition-all">
                        <div class="flex items-center gap-4">
                            <div class="bg-slate-800 p-3 rounded-xl group-hover:bg-red-500/10 transition">
                                <i data-lucide="download-cloud" class="w-5 h-5 text-slate-400 group-hover:text-red-500"></i>
                            </div>
                            <div>
                                <p class="font-bold text-sm">${release.name || 'Video Download'}</p>
                                <p class="text-[10px] text-slate-500 font-mono uppercase">${new Date(release.created_at).toLocaleString()}</p>
                            </div>
                        </div>
                        <a href="${release.assets[0]?.browser_download_url || '#'}" class="bg-slate-800 hover:bg-white hover:text-black px-4 py-2 rounded-xl text-xs font-bold transition">
                            Datei laden
                        </a>
                    </div>
                `).join('');
                lucide.createIcons();
            } catch (error) {
                container.innerHTML = '<p class="text-red-400">Fehler beim Laden der Releases.</p>';
            }
        }

        fetchReleases();
    </script>
</body>
</html>
